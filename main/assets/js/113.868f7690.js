(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{674:function(e,t,n){"use strict";n.r(t);var r=n(1),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"implementing-checksubstituteandupdatestate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#implementing-checksubstituteandupdatestate"}},[e._v("#")]),e._v(" Implementing "),n("code",[e._v("CheckSubstituteAndUpdateState")])]),e._v(" "),n("p",[n("code",[e._v("CheckSubstituteAndUpdateState")]),e._v(" will try to update the client with the state of the substitute client. "),n("a",{attrs:{href:"https://ibc.cosmos.network/main/ibc/proposals.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("This type of governance proposal"),n("OutboundLink")],1),e._v(" is typically used to recover an expired and frozen client, as it can recover the entire state and therefore all existing channels built on top of the client.")]),e._v(" "),n("p",[e._v("Prior to updating, this function must verify that:")]),e._v(" "),n("ul",[n("li",[e._v("the substitute client is the same type as the subject client. For a reference implementation, please see the "),n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/02-client-refactor-beta1/modules/light-clients/07-tendermint/proposal_handle.go#L32",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tendermint light client"),n("OutboundLink")],1),e._v(".")]),e._v(" "),n("li",[e._v("the provided substitute may be used to update the subject client. This may mean that certain parameters must remain unaltered. For example, a "),n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/02-client-refactor-beta1/modules/light-clients/07-tendermint/proposal_handle.go#L84",target:"_blank",rel:"noopener noreferrer"}},[e._v("valid substitute Tendermint light client"),n("OutboundLink")],1),e._v(" must NOT change the chain ID, trust level, max clock drift, unbonding period, proof specs or upgrade path. Please note that "),n("code",[e._v("AllowUpdateAfterMisbehaviour")]),e._v(" and "),n("code",[e._v("AllowUpdateAfterExpiry")]),e._v(" have been deprecated (see ADR 026 for more information).")])]),e._v(" "),n("p",[e._v("After these checks are performed, the function must "),n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/02-client-refactor-beta1/modules/light-clients/07-tendermint/proposal_handle.go#L77",target:"_blank",rel:"noopener noreferrer"}},[e._v("set the updated client and consensus states"),n("OutboundLink")],1),e._v(" within the clientStore for the subject client.")])])}),[],!1,null,null,null);t.default=o.exports}}]);